language: generic
sudo: required

addons:
    apt:
        update: true
        packages:
            - libosmesa-dev
            - texlive-full
            - latexmk

before_install:
    - wget https://sourceforge.net/projects/asymptote/files/2.45/asymptote-2.45.src.tgz
    - tar -xzf asymptote-2.45.src.tgz
    - cd asymptote-2.45/
    - ./configure --enable-offscreen
    - make all
    - sudo make install
    - cd ..
    - rm -rf asymptote-2.45

script:
    - latexmk -help
    - make
    - make clean

deploy:
    provider: pages
    skip-cleanup: true
    github-token: $GITHUB_TOKEN
